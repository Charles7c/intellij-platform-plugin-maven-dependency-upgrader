# IntelliJ IDEA 插件-Maven 依赖管理助手

## 1. 项目概述
开发一款 IntelliJ IDEA 插件，帮助开发者高效管理 Maven 项目的依赖。插件需提供依赖的可视化列表、版本信息、一键升级功能，并结合安全与升级建议，提升依赖管理的安全性和便捷性。

## 2. 目标用户
- Java 后端开发人员
- 使用 Maven 构建工具的项目团队
- 对依赖版本管理和安全漏洞扫描有需求的开发者

## 3. 功能需求
### 3.1 依赖列表展示
- **扫描项目**：自动解析当前项目的 `pom.xml` 文件，列出所有直接依赖（包括父 POM 中管理的依赖）。
- **展示维度**：以表格或树状结构展示，包含以下字段：
  - GroupId、ArtifactId
  - 当前版本（项目实际使用的版本）
  - 最新版本（从 Maven 中央仓库或配置的远程仓库获取的最新稳定版）
  - 是否有更新（通过颜色或图标标识）
  - 安全警告标识（如有已知漏洞）
- **过滤与搜索**：支持按关键字搜索依赖，按是否有更新、是否有漏洞进行筛选。

### 3.2 版本信息查询
- **实时查询**：点击依赖项可查看详细信息，包括：
  - 所有可用版本列表（可按时间排序）
  - 当前版本与最新版本的对比
  - 版本发布时间
- **仓库配置**：支持使用项目配置的 Maven 仓库（settings.xml 中的 mirror、repository）或公共中央仓库。

### 3.3 一键升级至最新版本
- **升级操作**：在依赖列表中选择一个或多个依赖，点击“升级”按钮，自动将 `pom.xml` 中对应 dependency 的 version 更新为最新版本（或用户选择的指定版本）。
- **批量升级**：支持批量选择依赖进行升级。
- **冲突处理**：若依赖被父 POM 管理，提示用户修改父 POM 或使用 dependencyManagement 覆盖；若升级后可能导致传递性依赖冲突，提供冲突检测与警告。

### 3.4 升级建议
- **智能推荐**：基于语义化版本规则，推荐升级类型（如补丁升级、小版本升级、大版本升级）。
- **兼容性提示**：分析依赖的更新日志（若能获取）或根据版本变化，提示可能的 API 变更、弃用项等。
- **建议说明**：对每个依赖提供简短的升级建议（例如：“建议升级到最新补丁版本以修复已知问题”）。

### 3.5 安全说明与漏洞提醒
- **漏洞扫描**：集成已知漏洞数据库（如 OWASP Dependency Check、GitHub Advisory Database 等），检查每个依赖是否存在已知的安全漏洞。
- **安全标识**：在依赖列表中高亮有漏洞的依赖，并显示漏洞数量、严重等级（如高危、中危、低危）。
- **详细报告**：点击漏洞标识，展示漏洞详情（CVE 编号、描述、受影响的版本范围、修复版本建议）。
- **升级修复**：对于有漏洞的依赖，提供一键升级到已修复版本的建议（若存在）。

## 4. 非功能需求
- **性能**：依赖列表加载应在 2 秒内完成（中等规模项目）。版本查询和漏洞扫描应支持异步后台执行，避免阻塞 UI。
- **兼容性**：
  - 支持 IntelliJ IDEA 2021.3 及以上版本（涵盖主流版本）。
  - 兼容 Maven 3.6.0 及以上版本。
  - 支持多模块 Maven 项目。
- **可扩展性**：插件架构应允许未来添加对其他构建工具（如 Gradle）的支持。
- **离线支持**：当无网络连接时，应提示“离线模式”，并仅显示本地已有信息（如当前版本，无法获取最新版本和安全数据）。

## 5. 用户界面要求
- **工具窗口**：在 IDEA 右侧添加一个“Maven 依赖管理”工具窗口，与 Maven 工具窗口并列。
- **布局**：
  - 上方为过滤/搜索栏。
  - 中部为依赖列表（表格形式，列可排序）。
  - 底部为详情面板（选中依赖后显示详细信息、版本列表、安全报告）。
- **操作按钮**：升级、刷新、扫描漏洞等按钮放置在工具栏中。
- **图标与颜色**：使用 IntelliJ 平台 UI 规范，更新标识用绿色箭头，漏洞标识用红色警告图标。

## 6. 技术约束与建议
- **开发语言**：Java + Kotlin（推荐 Kotlin 以利用 IntelliJ Platform Plugin 的现代 API）。
- **依赖获取**：使用 Maven 的 Aether/Resolver API 或直接调用 Maven 命令行解析依赖；最新版本查询可通过 HTTP 请求访问 Maven 仓库索引（如 Sonatype Nexus、Maven Central Search API）。
- **漏洞数据源**：可集成 OWASP Dependency Check 的本地数据库（需用户配置）或通过公共 API 查询（如 GitHub Security Advisory API）。
- **插件 SDK**：基于 IntelliJ Platform Plugin SDK 开发，遵循插件开发规范。

## 7. 优先级
| 优先级 | 功能                     |
| ------ | ------------------------ |
| P0     | 依赖列表展示（当前版本） |
| P0     | 最新版本查询             |
| P0     | 一键升级至最新版本       |
| P1     | 漏洞扫描与安全标识       |
| P1     | 升级建议（兼容性提示）   |
| P2     | 批量升级                 |
| P2     | 版本列表查看与选择升级   |
| P3     | 离线支持                 |

## 8. 验收标准
- 打开任意 Maven 项目，工具窗口能正确列出所有依赖。
- 对于可升级的依赖，点击升级后 `pom.xml` 中的版本号被正确修改。
- 对于有已知漏洞的依赖，列表中有明确标识，并能查看漏洞详情。
- 插件安装、卸载无残留，不影响 IDEA 稳定性。
- 性能满足非功能需求。
